## 什么是堆

1. 堆（英语：heap)是计算机科学中一类特殊的数据结构的统称。堆通常是一个可以被看做一棵树的数组对象。堆总是满足下列性质：
  * 堆中某个节点的值总是不大于或不小于其父节点的值；
  * 堆总是一棵完全二叉树。
  * 将根节点最大的堆叫做最大堆或大根堆，根节点最小的堆叫做最小堆或小根堆。常见的堆有二叉堆、斐波那契堆等。
2. 堆和普通树的区别
  * 节点的顺序。在二叉搜索树中，左子节点必须比父节点小，右子节点必须必比父节点大。但是在堆中并非如此。在最大堆中两个子节点都必须比父节点小，而在最小堆中，它们都必须比父节点大。
内存占用。
  * 普通树占用的内存空间比它们存储的数据要多。你必须为节点对象以及左/右子节点指针分配内存。堆仅仅使用一个数据来村塾数组，且不使用指针。
  * 平衡。二叉搜索树必须是“平衡”的情况下，其大部分操作的复杂度才能达到O(log n)。你可以按任意顺序位置插入/删除数据，或者使用 AVL 树或者红黑树，但是在堆中实际上不需要整棵树都是有序的。我们只需要满足对属性即可，所以在堆中平衡不是问题。因为堆中数据的组织方式可以保证O(log n) 的性能。
  * 搜索。在二叉树中搜索会很快，但是在堆中搜索会很慢。在堆中搜索不是第一优先级，因为使用堆的目的是将最大（或者最小）的节点放在最前面，从而快速的进行相关插入、删除操作。
3. 如果我们不允许使用指针，那么我们怎么知道哪一个节点是父节点，哪一个节点是它的子节点呢？节点在数组中的位置index 和它的父节点已经子节点的索引之间有一个映射关系。
```python
parent(i) = floor((i - 1)/2)   #floor()向下取整
left(i)   = 2*i + 1
right(i)  = 2*i + 2
```

## 堆的基本操作

1. 有两个原始操作用于保证插入或删除节点以后堆是一个有效的最大堆或者最小堆：
  * shiftUp(): 如果一个节点比它的父节点大（最大堆）或者小（最小堆），那么需要将它同父节点交换位置。这样是这个节点在数组的位置上升。
  * shiftDown(): 如果一个节点比它的子节点小（最大堆）或者大（最小堆），那么需要将它向下移动。这个操作也称作“堆化（heapify）”。
  * shiftUp 或者 shiftDown 是一个递归的过程，所以它的时间复杂度是 O(log n)。
  
## 堆的应用

1. 优先级队列：优先队列最重要的操作是删除最大元素和插入元素，与堆不谋而合。
2. 海量数据找Top K，用小根堆。
3. 堆排序，复杂度O(nlog2n)
